include_recipe 'td-agent'

template "td-agent.conf" do
  source "td-agent.conf.erb"
  path "/etc/td-agent/td-agent.conf"
  owner "td-agent"
  group "td-agent"
  mode "0666"
end

group 'root' do
  action [:modify]
  members ['td-agent']
  append true
end

td_agent_gem "elasticsearch" do
  plugin true
end

td_agent_gem "fluent-plugin-parser" do
  plugin true
end

td_agent_gem "fluent-plugin-record-reformer" do
  plugin true
end