#!/usr/bin/env bash
ENVNAME=$<%= params[:eb_envname] %>
CNAME=$<%= params[:eb_cname] %>
VPCID=$<%= params[:eb_vpc_id] %>
ELBSUBNET=$<%= params[:eb_elb_subnet] %>
EC2SUBNET=$<%= params[:eb_ec2_subnet] %>
INSTANCE=$<%= params[:eb_instance] %>
SSH_KEY=$<%= params[:eb_ssh_key_name] %>
DBENGINE=$<%= params[:eb_db_engine] %>
DBSIZE=$<%= params[:eb_db_size] %>
DBINSTANCE=$<%= params[:eb_db_instance] %>
DBPASSWORD=$<%= params[:eb_db_password] %>
DBUSERNAME=$<%= params[:eb_db_username] %>
DBVERSION=$<%= params[:eb_db_version] %>
DBSUBNET1=$<%= params[:eb_db_subnet_1] %>
DBSUBNET2=$<%= params[:eb_db_subnet_2] %>

echo "**********************************"
echo ENVNAME:$ENVNAME
echo CNAME:$CNAME
echo VPCID:$VPCID
echo ELBSUBNET:$ELBSUBNET
echo EC2SUBNET:$EC2SUBNET
echo INSTANCE:$INSTANCE
echo SSH_KEY:$SSH_KEY
echo DBENGINE:$DBENGINE
echo DBSIZE:$DBSIZE
echo DBINSTANCE:$DBINSTANCE
echo DBPASSWORD:$DBPASSWORD
echo DBUSERNAME:$DBUSERNAME
echo DBVERSION:$DBVERSION
echo DBSUBNET1:$DBSUBNET1
echo DBSUBNET2:$DBSUBNET2
echo "**********************************"

eb create $ENVNAME \
                     --cname $CNAME \
                     --vpc.id $VPCID \
                     --vpc.elbsubnets $ELBSUBNET \
                     --vpc.ec2subnets $EC2SUBNET \
                     --vpc.publicip \
                     --vpc.elbpublic \
                     --instance_type $INSTANCE \
                     --keyname $SSH_KEY \
                     --database \
                     --database.engine $DBENGINE \
                     --database.size $DBSIZE \
                     --database.instance $DBINSTANCE \
                     --database.password $DBPASSWORD \
                     --database.username $DBUSERNAME \
                     --database.version $DBVERSION \
                     --vpc.dbsubnets $DBSUBNET1,$DBSUBNET2
