role :app, %w(127.0.0.1)
role :db,  %w(127.0.0.1)
role :web, %w(127.0.0.1)

set(
    :ssh_options,
    port: 2222,
    auth_methods: %w(publickey),
    keys: [File.expand_path("../../../ops/02_staging/.vagrant/machines/default/virtualbox/private_key", __FILE__)],
    user: "vagrant"
)
set :rails_env, :staging
set :branch, 'staging'
set :bundle_without, []
# capistrano-scm-copyの設定
set :scm, :copy
set :include_dir, ["*", '.ruby-version', '.postcssrc.yml', '.env.development']
set :exclude_dir, ['vendor/bundle', 'log\/*', 'tmp\/*', 'mydb\/*', 'public\/*', 'node_modules\/*', 'ops\/*']
set :db_name, 'staging'

#Whenever
#set :whenever_environment, "#{fetch(:stage)}"
#set :whenever_identifier, ->{ "#{fetch(:application)}_#{fetch(:stage)}" }

#SSHKit.config.command_map[:whenever] = "bundle exec whenever"
